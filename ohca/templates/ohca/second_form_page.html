{% extends 'ohca/form_base.html' %}
{% load crispy_forms_tags %}
{% block content %}



    <h2 style="font-weight: 500;">Izpolnite podatke o dogodku</h2>


    <h5 style="font-weight: 600;">Obrazec izpolnjujete ne glede na to ali je vaš NMP vključen v DCZ ali ne.</h5>

    <p><b style="font-weight: 600;">Opomba:</b> za identifikacijo dogodka uporabimo ali intervencijsko številko primera ali pa ime in priimek pacienta, datum ter čas (lahko ocenjen) dogodka. Prosimo, da ta polja izpolnete enako kot ste jih izpolnili na prvem obrazcu. Če boste pustili prazna polja tako pri intervencijski številki kot času srčnega zastoja bo stran vrnila napako. Če boste vpisali intervencijsko številko lahko vprašanje o času srčnega zastoja pustite prazno.</p>

    <p><b style="font-weight: 600;">Navodila za izpolnjevanje obrazca:</b></p>
    <p> Odgovor <b style="font-weight: 600;">“Ni zabeleženo/ni zavedeno”</b> se uporabi kadar poizvedba o
        podatku ni opravljena. V kolikor se podatek poskuša pridobiti, vendar ne dobimo odgovora, se označi <b style="font-weight: 600;">“Neznano/ni podatka”. “Neznano/ni podatka"</b> izberite prosim tudi takrat, kadar vprašanje oz. odgovor nanj ni smiseln glede na okoliščine dogodka (npr. če očividca ni bilo na kraju dogodka, potem ne morete izpolniti njegovega spola; zato izberete ni podatka).
        
        <p>Prosimo <b style="font-weight: 600;">natančno izpolnite obrazec</b>. </p>
        
        <p>Če ni označeno drugače, je možen <b style="font-weight: 600;">le en odgovor.</b> </p>
        <p>Prosimo izpolnite celoten obrazec (odgovorite na vse spremenljivke), razen, če je označeno drugače. Čase zapisujte v <b style="font-weight: 600;">24-urnem formatu</b>. </p>
        
        <p>Če je vaš NMP vključen v DCZ na obrazcu ne boste našli vprašanj z oznako DCZ, saj jih bo zagotovil DCZ, v nasprotnem primeru jih prosimo izpolnite sami.  </p>

        <p>V primeru, da ekipa ob svojem prihodu ugotovi, da je bolnik/bolnica mrtev in oživljanje s strani NMP ni indicirano, prosimo <b style="font-weight: 600;">smiselno izpolnite obrazec v skladu z ugotovitvami na terenu.</b></p>

        <p>Pogosto zastavljena vprašanja in odogovori so dostopni <a href="https://siohca.um.si/faq/">tukaj</a>.</p>
        
    <form method="POST">
        {% csrf_token %}
        {% load cache %}
        {% cache 86400 form3 %}
        <p> </p>
        <p> </p>


        Vpišite 12-mestno številko intervencije
        <p> </p>
        <p> </p>
        <div class="form-row">
            <div class="form-group col-md-1 mb-0">
                {{ form2.i1|as_crispy_field }}
            </div>
            <div class="form-group col-md-1 mb-0">
                {{ form2.i2|as_crispy_field }}
            </div>
            <div class="form-group col-md-1 mb-0">
                {{ form2.i3|as_crispy_field }}
            </div>
            <div class="form-group col-md-1 mb-0">
                {{ form2.i4|as_crispy_field }}
            </div>
            <div class="form-group col-md-1 mb-0">
                {{ form2.i5|as_crispy_field }}
            </div>
            <div class="form-group col-md-1 mb-0">
                {{ form2.i6|as_crispy_field }}
            </div>
            <div class="form-group col-md-1 mb-0">
                {{ form2.i7|as_crispy_field }}
            </div>
            <div class="form-group col-md-1 mb-0">
                {{ form2.i8|as_crispy_field }}
            </div>
            <div class="form-group col-md-1 mb-0">
                {{ form2.i9|as_crispy_field }}
            </div>
            <div class="form-group col-md-1 mb-0">
                {{ form2.i10|as_crispy_field }}
            </div>
            <div class="form-group col-md-1 mb-0">
                {{ form2.i11|as_crispy_field }}
            </div>
            <div class="form-group col-md-1 mb-0">
                {{ form2.i12|as_crispy_field }}
            </div>
        </div>

        <script src="/static/js/intervention_id.js"></script>
        
        <div class="container">
            <div class="row">
                <div class="col-sm text-center">
                    <p>Dispečerski center</p>
                    <p id="dsz">-----</p>
                </div>
                <div class="col-sm text-center">
                    <p>Datum intervencije</p>
                    <p id="dateInt">--/--/----</p>
                </div>
                <div class="col-sm text-center">
                    <p>Dnevna št. intervencije</p>
                    <p id="intNum">-----</p>
                </div>
            </div>
        </div>
        
        {% with '"adHospitalName", "adBystAge", "ecgopt", "allDrugs", "airway", "adTtmTemp", "adTargetBP", "adPh", "adLactate", "adShocks"' as list %}


        {% for field in form1 %}

        {% if field.name not in list %}

        {% if field.name != "adWithdraw" %}

        {% if field.name == "name" %}
            <h2 style='font-weight: 600; font-size: 25px'> 1. Podatki o pacientu </h2>
            <p>{{ field|as_crispy_field }}</p>

        {% elif field.name == "reaConf" %}
            <h2 style='font-weight: 600; font-size: 25px'> 2. Osnovni podatki</h2>
            <p>{{ field|as_crispy_field }}</p>

        {% elif field.name == "reaTimestamp" %}
            <h2 style='font-weight: 600; font-size: 25px'> 3. Časovnica</h2>
            <p>{{ field|as_crispy_field }}</p>

        {% elif field.name == "stemiPresent" %}
            <h2 style='font-weight: 600; font-size: 25px'> 4. Podatki o srčnem zastoju</h2>
            <p>{{ field|as_crispy_field }}</p>

        {% elif field.name == "dispIdentifiedCA" %}
            <h2 style='font-weight: 600; font-size: 25px'> 5. Odziv dispečerja</h2>
            <p>{{ field|as_crispy_field }}</p>

        {% elif field.name == "helperWho" %}
            <h2 style='font-weight: 600; font-size: 25px'> 6. Prvi posredovalci </h2>
            <p>{{ field|as_crispy_field }}</p>

        {% elif field.name == "AEDconn" %}
            <h2 style='font-weight: 600; font-size: 25px'> 7. Ritem</h2>
            <p>{{ field|as_crispy_field }}</p>



        {% elif field.name == "rosc" %}
            <h2 style='font-weight: 600; font-size: 25px'> 8. Izhod po oživljanju </h2>
            <p>{{ field|as_crispy_field }}</p>

        {% elif field.name == "drugs" %}
            <h2 style='font-weight: 600; font-size: 25px'> 9. Zdravljenje </h2>
            <p>{{ form1.allDrugs|as_crispy_field }}</p>

        {% elif field.name == "ph" %}
            <h2 style='font-weight: 600; font-size: 25px'> 10. Laboratorijski izvidi </h2>
            <p>{{ field|as_crispy_field }}</p>
            <p>{{ form1.adPh|as_crispy_field }}</p>

        {% elif field.name == "discDate" %}
            <h2 style='font-weight: 600; font-size: 25px'> 11. Dolgotrajen izid </h2>
            <p>{{ field|as_crispy_field }}</p>
        
        {% elif field.name == "treatmentWithdrawnTimestamp" %}
            <p>{{ field|as_crispy_field }}</p>
            <p>{{ form1.adWithdraw|as_crispy_field }}</p>

        {% elif field.name == "ssep" %}
            <h2 style='font-weight: 300; font-size: 20px'> Nevroprognostični testi </h2>
            <p>{{ field|as_crispy_field }}</p>

            {% elif field.name == "airwayControl" %}
            <p>{{ form1.airway|as_crispy_field }}</p>

        {% elif field.name == "ttmTemp" %}
            <p>{{ field|as_crispy_field }}</p>
            <p>{{ form1.adTtmTemp|as_crispy_field }}</p>

            {% elif field.name == "lactate" %}
            <p>{{ field|as_crispy_field }}</p>
            <p>{{ form1.adLactate|as_crispy_field }}</p>

            {% elif field.name == "targetBP" %}
            <p>{{ field|as_crispy_field }}</p>
            <p>{{ form1.adTargetBP|as_crispy_field }}</p>

            {% elif field.name == "shocks" %}
            <p>{{ field|as_crispy_field }}</p>
            <p>{{ form1.adShocks|as_crispy_field }}</p>

            {% elif field.name == "hospitalName" %}
            <p>{{ field|as_crispy_field }}</p>
            <p>{{ form1.adHospitalName|as_crispy_field }}</p>

            {% elif field.name == "ageBystander" %}
            <p>{{ field|as_crispy_field }}</p>
            <p>{{ form1.adBystAge|as_crispy_field }}</p>

        {% else %}
            <p>{{ field|as_crispy_field }}</p>

        {% endif %}
        {% endif %}
        {% endif %}
        {% endfor %}
        {% endwith %}
        <script src="/static/js/formPersistence.js"></script>
        <script src="/static/js/secondFormValidation.js"></script>
        <input type="submit" class="btn btn-dark" value="Submit" onclick="saveFormToCookie()">
        {% endcache %}
    </form>

{% endblock %}